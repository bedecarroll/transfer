<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transfer Time Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-bar">
                <h1>Transfer Time Calculator</h1>
                <button id="theme-toggle-btn" class="theme-toggle-btn" aria-describedby="theme-help" title="Toggle Dark Mode">&#9728;&#65039;</button>
            </div>
            <div id="theme-help" class="sr-only">Switch between light and dark theme</div>
            <p>Calculate theoretical transfer time and TCP metrics based on file size and bandwidth.</p>
        </header>
        <main>
            <div class="input-section">
                <label for="size-input">File size:</label>
                <div style="display: flex; gap: 10px;">
                    <input type="number" id="size-input" placeholder="Enter size..." min="0" step="any" aria-describedby="size-help">
                    <select id="size-unit">
                        <option value="B">B</option>
                        <option value="KB">KB</option>
                        <option value="MB">MB</option>
                        <option value="GB" selected>GB</option>
                        <option value="TB">TB</option>
                        <option value="KiB">KiB</option>
                        <option value="MiB">MiB</option>
                        <option value="GiB">GiB</option>
                        <option value="TiB">TiB</option>
                    </select>
                </div>
                <div id="size-help" class="sr-only">Enter file size and select unit.</div>
            </div>
            <div class="input-section">
                <label for="bandwidth-input">Bandwidth:</label>
                <div style="display: flex; gap: 10px;">
                    <input type="number" id="bandwidth-input" placeholder="Enter bandwidth..." min="0" step="any" aria-describedby="bandwidth-help">
                    <select id="bandwidth-unit">
                        <option value="bps">bps</option>
                        <option value="Kbps">Kbps</option>
                        <option value="Mbps">Mbps</option>
                        <option value="Gbps" selected>Gbps</option>
                        <option value="Tbps">Tbps</option>
                    </select>
                </div>
                <div id="bandwidth-help" class="sr-only">Enter bandwidth and select unit.</div>
            </div>
            <details id="advanced-section">
                <summary>Advanced Options</summary>
                <div class="input-section">
                    <label for="latency-input">Latency (ms):</label>
                    <input type="number" id="latency-input" value="10" min="0" step="any" aria-describedby="latency-help">
                    <div id="latency-help" class="sr-only">Round-trip latency in milliseconds.</div>
                </div>
                <div class="input-section">
                    <label for="extra-bytes-input">Extra header bytes:</label>
                    <input type="number" id="extra-bytes-input" value="0" min="0" step="any" aria-describedby="extra-bytes-help">
                    <div id="extra-bytes-help" class="sr-only">Additional bytes to add on top of the selected preset.</div>
                </div>
                <div class="input-section">
                    <label for="loss-input">Packet loss (%):</label>
                    <input type="number" id="loss-input" value="0.001" min="0" max="100" step="any" aria-describedby="loss-help">
                    <div id="loss-help" class="sr-only">Packet loss percentage used for the Mathis throughput formula. Default is 0.001%.</div>
                </div>
                <div class="input-section">
                    <label for="rwnd-input">TCP window size (bytes):</label>
                    <input type="number" id="rwnd-input" value="16777216" min="0" step="any" aria-describedby="rwnd-help">
                    <div id="rwnd-help" class="sr-only">Receiver window size used to determine throughput limits.</div>
                </div>
                <div class="input-section">
                    <h4>Overhead Preset:</h4>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <label for="preset-select" class="sr-only">Overhead Preset</label>
                        <select id="preset-select" style="flex:1;"></select>
                    </div>
                </div>
                <div id="header-stack" class="header-stack" aria-live="polite"></div>
            </details>
            <button id="calculate-btn" class="convert-btn" aria-describedby="calculate-help">Calculate</button>
            <div id="calculate-help" class="sr-only">Calculate transfer time</div>
            <div id="result" class="results-section"></div>
        </main>
    </div>
    <script type="module" src="dist/main.js"></script>
</body>
</html>
